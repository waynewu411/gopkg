package tlv

import (
	"testing"
)

func TestDecodeWithData(t *testing.T) {
	data := []byte("\xFF\x03\x25\xDF\x02\x22\x39\x39\x36\x30\x30\x30\x30\x30\x30\x30\x30\x31\x30\x32\x30\x30\x5F\x54\x5A\x4D\x4F\x43\x4B\x55\x50\x5F\x46\x49\x4C\x45\x2E\x50\x33\x54")
	got, err := DecodeWithData(data)
	expect := []Node{
		{Type: []byte("\xFF\x03"),
			Length: 37,
			Value:  []byte("\xDF\x02\x22\x39\x39\x36\x30\x30\x30\x30\x30\x30\x30\x30\x31\x30\x32\x30\x30\x5F\x54\x5A\x4D\x4F\x43\x4B\x55\x50\x5F\x46\x49\x4C\x45\x2E\x50\x33\x54"),
			Nodes: []Node{
				{Type: []byte("\xDF\x02"), Length: 34, Value: []byte("\x39\x39\x36\x30\x30\x30\x30\x30\x30\x30\x30\x31\x30\x32\x30\x30\x5F\x54\x5A\x4D\x4F\x43\x4B\x55\x50\x5F\x46\x49\x4C\x45\x2E\x50\x33\x54")},
			},
		},
	}
	if nil != err {
		t.Errorf("error expected: %v, got: %v", nil, err)
	}
	if !got.Equal(expect) {
		t.Errorf("nodes expected: %v, got: %v", expect, got)
	}
}
